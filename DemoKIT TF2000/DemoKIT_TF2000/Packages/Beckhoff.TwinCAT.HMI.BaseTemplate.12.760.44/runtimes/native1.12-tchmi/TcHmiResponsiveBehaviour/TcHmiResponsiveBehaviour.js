var TcHmi;!function(TcHmi){!function(Functions){!function(BaseTemplate){function ResponsiveBehaviour(mediaQueries,affectedControls){if(!ResponsiveBehaviour.controlsAttached){for(let control of affectedControls){let controlInstance=TcHmi.Controls.get(control.controlID);if(controlInstance&&!1===controlInstance.getIsAttached())return}ResponsiveBehaviour.controlsAttached=!0}let width=document.documentElement.clientWidth;if(void 0===ResponsiveBehaviour.currentMediaQuery&&(ResponsiveBehaviour.currentMediaQuery="0"),!ResponsiveBehaviour.controlDimensionsInitialized){ResponsiveBehaviour.controlDimensionsInitialized=!0;for(let control of affectedControls){let controlDimensions={height:null,heightUnit:null,width:null,widthUnit:null,top:null,topUnit:null,bottom:null,bottomUnit:null,left:null,leftUnit:null,right:null,rightUnit:null},controlInstance=TcHmi.Controls.get(control.controlID);controlInstance&&(controlDimensions.width=TcHmi.Binding.resolve("Width",controlInstance)??controlInstance.getWidth()??null,controlDimensions.widthUnit=TcHmi.Binding.resolve("WidthUnit",controlInstance)??controlInstance.getWidthUnit()??null,controlDimensions.height=TcHmi.Binding.resolve("Height",controlInstance)??controlInstance.getHeight()??null,controlDimensions.heightUnit=TcHmi.Binding.resolve("HeightUnit",controlInstance)??controlInstance.getHeightUnit()??null,controlDimensions.top=TcHmi.Binding.resolve("Top",controlInstance)??controlInstance.getTop()??null,controlDimensions.topUnit=TcHmi.Binding.resolve("TopUnit",controlInstance)??controlInstance.getTopUnit()??null,controlDimensions.bottom=TcHmi.Binding.resolve("Bottom",controlInstance)??controlInstance.getBottom()??null,controlDimensions.bottomUnit=TcHmi.Binding.resolve("BottomUnit",controlInstance)??controlInstance.getBottomUnit()??null,controlDimensions.left=TcHmi.Binding.resolve("Left",controlInstance)??controlInstance.getLeft()??null,controlDimensions.leftUnit=TcHmi.Binding.resolve("LeftUnit",controlInstance)??controlInstance.getLeftUnit()??null,controlDimensions.right=TcHmi.Binding.resolve("Right",controlInstance)??controlInstance.getRight()??null,controlDimensions.rightUnit=TcHmi.Binding.resolve("RightUnit",controlInstance)??controlInstance.getRightUnit()??null),ResponsiveBehaviour.controlDimensionMap.set(control.controlID,controlDimensions)}}let newMediaQuery=null,currentMediaQuery=ResponsiveBehaviour.currentMediaQuery,returnName=currentMediaQuery.name;if(mediaQueries&&mediaQueries.length&&mediaQueries.length>0)for(let media of mediaQueries){if(media.minWidth<=width&&media.maxWidth>width){newMediaQuery=media;break}(null===newMediaQuery||newMediaQuery.maxWidth<media.maxWidth)&&(newMediaQuery=media)}return newMediaQuery&&newMediaQuery.name!==currentMediaQuery.name&&(resetMediaQuery(currentMediaQuery,affectedControls),runMediaQuery(newMediaQuery,affectedControls),ResponsiveBehaviour.currentMediaQuery=newMediaQuery,returnName=newMediaQuery.name),returnName}BaseTemplate.ResponsiveBehaviour=ResponsiveBehaviour,ResponsiveBehaviour.currentMediaQuery=new Object,ResponsiveBehaviour.controlsAttached=!1,ResponsiveBehaviour.controlDimensionsInitialized=!1,ResponsiveBehaviour.controlDimensionMap=new Map;let setControlDimension=function(controlID,dimension){let controlInstance=TcHmi.Controls.get(controlID);if(!controlInstance)return;let controlDimensions=ResponsiveBehaviour.controlDimensionMap.get(controlID),newValue=null,newUnit=null,valueFunction=null,unitFunction=null;switch(dimension){case"Height":controlDimensions&&(newValue=controlDimensions.height,newUnit=controlDimensions.heightUnit),valueFunction=controlInstance.setHeight,unitFunction=controlInstance.setHeightUnit;break;case"Width":controlDimensions&&(newValue=controlDimensions.width,newUnit=controlDimensions.widthUnit),valueFunction=controlInstance.setWidth,unitFunction=controlInstance.setWidthUnit;break;case"Top":controlDimensions&&(newValue=controlDimensions.top,newUnit=controlDimensions.topUnit),valueFunction=controlInstance.setTop,unitFunction=controlInstance.setTopUnit;break;case"Bottom":controlDimensions&&(newValue=controlDimensions.bottom,newUnit=controlDimensions.bottomUnit),valueFunction=controlInstance.setBottom,unitFunction=controlInstance.setBottomUnit;break;case"Left":controlDimensions&&(newValue=controlDimensions.left,newUnit=controlDimensions.leftUnit),valueFunction=controlInstance.setLeft,unitFunction=controlInstance.setLeftUnit;break;case"Right":controlDimensions&&(newValue=controlDimensions.right,newUnit=controlDimensions.rightUnit),valueFunction=controlInstance.setRight,unitFunction=controlInstance.setRightUnit}TcHmi.Binding.exists(dimension.toString(),controlInstance)&&TcHmi.Binding.removeEx2("",dimension.toString(),controlInstance),TcHmi.Binding.exists(dimension.toString()+"Unit",controlInstance)&&TcHmi.Binding.removeEx2("",dimension.toString()+"Unit",controlInstance),null===newValue?null!==valueFunction&&valueFunction.call(controlInstance,null):TcHmi.Symbol.isSymbolExpression(newValue)?TcHmi.Binding.createEx(newValue,"set"+dimension,controlInstance):null!==valueFunction&&valueFunction.call(controlInstance,newValue),null===newUnit?null!==unitFunction&&unitFunction.call(controlInstance,null):TcHmi.Symbol.isSymbolExpression(newUnit)?TcHmi.Binding.createEx(newUnit,"set"+dimension+"Unit",controlInstance):null!==unitFunction&&unitFunction.call(controlInstance,newUnit)},runMediaQuery=function(mediaQuery,affectedList){if(mediaQuery?.controlBehaviourList)for(let control of mediaQuery.controlBehaviourList){let controlInstance=TcHmi.Controls.get(control.controlID);if(controlInstance)switch(control.displayOption){case"full":break;case"icons":controlInstance.setWidth(65);break;case"burger_top":case"burger_bottom":activateBurgerMenu(control,affectedList)}}},resetMediaQuery=function(mediaQuery,affectedList){if(mediaQuery?.controlBehaviourList)for(let control of mediaQuery.controlBehaviourList){if(TcHmi.Controls.get(control.controlID))switch(control.displayOption){case"full":break;case"icons":setControlDimension(control.controlID,"Width");break;case"burger_top":case"burger_bottom":deactivateBurgerMenu(control,affectedList)}}},getAffectedControls=function(originControl,affectedList){let newList=[],foundOriginControl=!1;for(let i=0;i<affectedList.length;i++)if(foundOriginControl)switch(originControl.position){case"Top":case"Bottom":"Center"!==affectedList[i].position&&"Right"!==affectedList[i].position&&"Left"!==affectedList[i].position||newList.push(affectedList[i]);break;case"Left":case"Right":"Center"!==affectedList[i].position&&"Top"!==affectedList[i].position&&"Bottom"!==affectedList[i].position||newList.push(affectedList[i])}else affectedList[i].controlID===originControl.controlID&&(foundOriginControl=!0);return newList.length>0?newList:null},findControlById=function(affectedList,controlID){for(let i=0;i<affectedList.length;i++)if(affectedList[i].controlID===controlID)return affectedList[i];return null},findControlByPosition=function(affectedList,position){for(let i=0;i<affectedList.length;i++)if(affectedList[i].position===position)return affectedList[i];return null},activateBurgerMenu=function(controlBehaviour,affectedList){let burgerControlContainer,burgerControl,targetControl=findControlById(affectedList,controlBehaviour.controlID);if(!targetControl)return;let targetControlInstance=TcHmi.Controls.get(targetControl.controlID);if(!targetControlInstance)return;if(void 0===TcHmi.Controls.get(targetControl.controlID+"_burgerMenuContainer"))burgerControlContainer=TcHmi.ControlFactory.create("TcHmi.Controls.System.TcHmiContainer",targetControl.controlID+"_burgerMenuContainer",targetControlInstance.getParent()),burgerControlContainer&&(burgerControlContainer.setWidth(80),burgerControlContainer.setHeight(80),burgerControlContainer.setClassNames(["divider"]));else{burgerControlContainer=TcHmi.Controls.get(targetControl.controlID+"_burgerMenuContainer"),targetControlInstance.getParent()?.getElement()[0].appendChild(burgerControlContainer.getElement()[0])}if(!burgerControlContainer)return;if(void 0===TcHmi.Controls.get(targetControl.controlID+"_burgerMenuButton")?(burgerControl=TcHmi.ControlFactory.create("TcHmi.Controls.BaseTemplate.TcHmiBurgerMenu",targetControl.controlID+"_burgerMenuButton",burgerControlContainer),burgerControl&&(burgerControl.setWidth(48),burgerControl.setHeight(48),burgerControl.setLeft(16),burgerControl.setTop(16))):burgerControl=TcHmi.Controls.get(targetControl.controlID+"_burgerMenuButton"),!burgerControl)return;burgerControl.setTargetControl(targetControlInstance),burgerControlContainer.setVisibility("Visible");let otherControls=getAffectedControls(targetControl,affectedList);switch(targetControl.position){case"Left":if(otherControls)for(let control of otherControls){let controlInstance=TcHmi.Controls.get(control.controlID);controlInstance&&(TcHmi.Binding.exists("Left",controlInstance)&&TcHmi.Binding.removeEx2("","Left",controlInstance),controlInstance.setLeft(0))}switch(burgerControlContainer.setLeft(0),controlBehaviour.displayOption){case"burger_bottom":burgerControlContainer.setBottom(0),burgerControlContainer.setTop(null),burgerControlContainer.setClassNames(["divider","divider-bottom"]);let bottomControl=findControlByPosition(affectedList,"Bottom");if(bottomControl){let bottomControlInstance=TcHmi.Controls.get(bottomControl.controlID);bottomControlInstance&&(TcHmi.Binding.exists("Left",bottomControlInstance)&&TcHmi.Binding.removeEx2("","Left",bottomControlInstance),bottomControlInstance.setLeft(80))}break;case"burger_top":burgerControlContainer.setTop(0),burgerControlContainer.setClassNames(["divider","divider-top"]);let topControl=findControlByPosition(affectedList,"Top");if(topControl){let topControlInstance=TcHmi.Controls.get(topControl.controlID);topControlInstance&&(TcHmi.Binding.exists("Right",topControlInstance)&&TcHmi.Binding.removeEx2("","Right",topControlInstance),topControlInstance.setLeft(80))}}break;case"Right":if(otherControls)for(let control of otherControls){let controlInstance=TcHmi.Controls.get(control.controlID);controlInstance&&(TcHmi.Binding.exists("Right",controlInstance)&&TcHmi.Binding.removeEx2("","Right",controlInstance),controlInstance.setRight(0))}switch(burgerControlContainer.setRight(0),controlBehaviour.displayOption){case"burger_bottom":burgerControlContainer.setBottom(0),burgerControlContainer.setTop(null),burgerControlContainer.setClassNames(["divider","divider-bottom"]);let bottomControl=findControlByPosition(affectedList,"Bottom");if(bottomControl){let bottomControlInstance=TcHmi.Controls.get(bottomControl.controlID);bottomControlInstance&&(TcHmi.Binding.exists("Right",bottomControlInstance)&&TcHmi.Binding.removeEx2("","Right",bottomControlInstance),bottomControlInstance.setRight(80))}break;case"burger_top":burgerControlContainer.setTop(0),burgerControlContainer.setClassNames(["divider","divider-top"]);let topControl=findControlByPosition(affectedList,"Top");if(topControl){let topControlInstance=TcHmi.Controls.get(topControl.controlID);topControlInstance&&(TcHmi.Binding.exists("Right",topControlInstance)&&TcHmi.Binding.removeEx2("","Right",topControlInstance),topControlInstance.setRight(80))}}}},deactivateBurgerMenu=function(controlBehaviour,affectedList){let targetControl=findControlById(affectedList,controlBehaviour.controlID);if(!targetControl)return;if(!TcHmi.Controls.get(targetControl.controlID))return;let burgerControl=TcHmi.Controls.get(targetControl.controlID+"_burgerMenuButton");if(!burgerControl)return;let burgerControlContainer=TcHmi.Controls.get(targetControl.controlID+"_burgerMenuContainer");if(!burgerControlContainer)return;let targetControlParent=burgerControlContainer.getElement()[0].parentElement;if(!targetControlParent)return;burgerControl.setTargetControl(null),targetControlParent.removeChild(burgerControlContainer.getElement()[0]);let otherControls=getAffectedControls(targetControl,affectedList);if(otherControls)switch(targetControl.position){case"Left":if(otherControls)for(let control of otherControls)setControlDimension(control.controlID,"Left");switch(controlBehaviour.displayOption){case"burger_bottom":let bottomControl=findControlByPosition(affectedList,"Bottom");bottomControl&&setControlDimension(bottomControl.controlID,"Left");break;case"burger_top":let topControl=findControlByPosition(affectedList,"Top");topControl&&setControlDimension(topControl.controlID,"Left")}break;case"Right":if(otherControls)for(let control of otherControls)setControlDimension(control.controlID,"Right");switch(controlBehaviour.displayOption){case"burger_bottom":let bottomControl=findControlByPosition(affectedList,"Bottom");bottomControl&&setControlDimension(bottomControl.controlID,"Right");break;case"burger_top":let topControl=findControlByPosition(affectedList,"Top");topControl&&setControlDimension(topControl.controlID,"Right")}}}}(Functions.BaseTemplate||(Functions.BaseTemplate={}))}(TcHmi.Functions||(TcHmi.Functions={}))}(TcHmi||(TcHmi={})),TcHmi.Functions.registerFunctionEx("TcHmiResponsiveBehaviour","TcHmi.Functions.BaseTemplate",TcHmi.Functions.BaseTemplate.ResponsiveBehaviour);