const TcHmi=window.TcHmi;import{TcHmiControl}from"../dist/TcHmiControl.esm.js";import{TcHmiUserControlHost}from"../dist/TcHmiUserControlHost.esm.js";export class TcHmiHtmlHost extends TcHmiControl{static#tchmiFQN="TcHmi.Controls.System."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot;__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_System_TcHmiHtmlHost-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-html-host-template")),0===this.__elementTemplateRoot.length)throw new Error("Invalid Template.html");let pcElementClone=this.__pcElement.clone();pcElementClone.children("[data-tchmi-target-attribute]").remove();let markup=pcElementClone[0].innerHTML;if(TCHMI_DESIGNER){let rootUc=null,temp=this.getParent();for(;temp;){if(temp instanceof TcHmiUserControlHost){rootUc=temp;break}temp=temp.getParent()}if(rootUc){let purl=tchmi_path(rootUc.getElement()[0].getAttribute("data-tchmi-partial-url"));if(purl&&purl===tchmi_path(TCHMI_TARGET_PARTIAL)){let exprsPartialParam=new TcHmi.System.SymbolExpressionFromText(markup).resolveExpressionsBySymbolType(TcHmi.SymbolType.PartialParam);if(exprsPartialParam)for(let i=0,ii=exprsPartialParam.length;i<ii;i++){let expr=exprsPartialParam[i];const content=expr.getContent();content&&(markup=markup.replace(new RegExp(tchmi_escape_regex(expr.toString()),"g"),`%pp%TCHMI_TARGET_DESIGNER_PARTIALPARAM::${content}%/pp%`))}}}}this.__elementTemplateRoot[0].appendChild(document.createRange().createContextualFragment(markup)),super.__previnit()}__init(){super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setContent(value){this.__elementTemplateRoot.empty(),null!==value&&(this.__elementTemplateRoot[0].innerHTML=value)}getContent(){return this.__elementTemplateRoot[0].innerHTML}__getContentWidth(){if(!this.__elementTemplateRoot)return null;const baseContentWidth=super.__getContentWidth();if(null!==baseContentWidth)return TcHmi.Controls.limitPixelDimensionToControlBound(this,"width",baseContentWidth);let offsetWidth=this.__elementTemplateRoot[0].offsetWidth;return 0===offsetWidth&&(offsetWidth=null),TcHmi.Controls.limitPixelDimensionToControlBound(this,"width",offsetWidth)}__getContentHeight(){if(!this.__elementTemplateRoot)return null;const baseContentHeight=super.__getContentHeight();if(null!==baseContentHeight)return TcHmi.Controls.limitPixelDimensionToControlBound(this,"height",baseContentHeight);let offsetHeight=this.__elementTemplateRoot[0].offsetHeight;return 0===offsetHeight&&(offsetHeight=null),TcHmi.Controls.limitPixelDimensionToControlBound(this,"height",offsetHeight)}}TcHmi.Controls.registerEx("TcHmiHtmlHost","TcHmi.Controls.System",TcHmiHtmlHost,{injectInGlobalObject:!0});